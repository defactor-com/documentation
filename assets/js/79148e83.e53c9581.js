"use strict";(self.webpackChunkdocus=self.webpackChunkdocus||[]).push([[4558],{1618:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>i,default:()=>h,frontMatter:()=>c,metadata:()=>t,toc:()=>d});var l=s(4848),o=s(8453);const c={id:"smart-contract-erc20-collateral-pool-technical-aspects",title:"Technical Aspects",sidebar_position:2,tags:["Technical Aspects"]},i=void 0,t={id:"pools/smart-contracts/pools-contract/smart-contract-erc20-collateral-pool-technical-aspects",title:"Technical Aspects",description:"Dependencies",source:"@site/docs/pools/smart-contracts/pools-contract/technical_aspects.md",sourceDirName:"pools/smart-contracts/pools-contract",slug:"/pools/smart-contracts/pools-contract/smart-contract-erc20-collateral-pool-technical-aspects",permalink:"/docs/pools/smart-contracts/pools-contract/smart-contract-erc20-collateral-pool-technical-aspects",draft:!1,unlisted:!1,editUrl:"https://github.com/defactor-com/documentation/tree/main/docs/pools/smart-contracts/pools-contract/technical_aspects.md",tags:[{label:"Technical Aspects",permalink:"/docs/tags/technical-aspects"}],version:"current",sidebarPosition:2,frontMatter:{id:"smart-contract-erc20-collateral-pool-technical-aspects",title:"Technical Aspects",sidebar_position:2,tags:["Technical Aspects"]},sidebar:"docSidebar",previous:{title:"Introduction",permalink:"/docs/pools/smart-contracts/pools-contract/smart-contract-erc20-collateral-pool"},next:{title:"Example",permalink:"/docs/pools/smart-contracts/pools-contract/smart-contract-erc20-collateral-pool-example"}},r={},d=[{value:"Dependencies",id:"dependencies",level:2},{value:"Contract: Pools",id:"contract-pools",level:2},{value:"Constants",id:"constants",level:3},{value:"Functions",id:"functions",level:3},{value:"Events",id:"events",level:3},{value:"Custom Errors",id:"custom-errors",level:3},{value:"Notes",id:"notes",level:2}];function a(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"OpenZeppelin Contracts (Upgradeable)"}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Pools.storage.sol"})," for storage-related operations"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"contract-pools",children:"Contract: Pools"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Inherits:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"PoolsStorage"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"AccessControlUpgradeable"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"PausableUpgradeable"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"ReentrancyGuardUpgradeable"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"IERC721ReceiverUpgradeable"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"IERC1155ReceiverUpgradeable"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Uses ",(0,l.jsx)(n.code,{children:"SafeERC20Upgradeable"})," for ERC20 token operations."]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"constants",children:"Constants"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"POOL_FEE"}),": Fixed fee for pool creation."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"LOAN_TAKEN_FEE_PERCENTAGE"}),": Fee percentage for taken loans."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"MIN_POOL_CLOSED_TIME"}),": Minimum time before a pool can be archived."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"COLLECT_POOL_MAX_TIME"}),": Maximum time for collecting funds from a pool."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"INTEREST_DECIMAL_PLACES"}),": Use to adjust the decimals in the interest rate calculation."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"functions",children:"Functions"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"__Pools_init"}),": Initializes the contract with USDC token."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"getPool"}),": Retrieves a pool by index."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"createPool"}),": Create a new funding pool, pool status default is CREATED."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"commitToPool"}),": Commits funds to a pool, only available for pools with CREATED status."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"collectPool"}),": Collects funds from a pool that has reached its goal, changes pool status to ACTIVE."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"depositRewards"}),": Deposits rewards into an active pool."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"closePool"}),": Closes an active pool."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"archivePool"}),": Archives a pool."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"uncommitFromPool"}),": Un-commit funds from a pool."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"claim"}),": Claims rewards from a pool."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"withdrawFeesCollected"}),": Withdraws collected fees by the admin."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"adminWithdrawAll"}),": Allows admin to withdraw all funds when paused."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"claimRewardsForUsers"}),": Allows pool owner or admin to claim rewards for user if more than 60 days has passed from pool closing."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"uncommitForUsers"}),": Allows pool owner or admin to uncommit for user if more than 60 days has passed from pool deadline."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"pause"}),": Pauses the contract."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"unpause"}),": Unpauses the contract."]}),"\n",(0,l.jsx)(n.li,{children:"Private helper functions for token transfers."}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"events",children:"Events"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"PoolCreated"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"CommittedToPool"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"UncommittedFromPool"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"PoolCollected"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"RewardsDeposited"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"PoolClosed"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"RewardsClaimed"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"PoolArchived"})}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"custom-errors",children:"Custom Errors"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"PoolDoesNotExists"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"SoftCapMustBeLessThanHardCap"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"DeadlineMustBeInFuture"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"PoolStatusMustBeCreated"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"PoolStatusMustBeActive"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"MustDepositAtleastCommittedAmount"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"PoolDeadlineReached"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"PoolDeadlineNotReached"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"PoolHardCapReached"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"MustBePoolOwner"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"PoolSoftCapNotReached"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"CannotCollect30DaysAfterDeadline"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"PoolStatusMustBeClosedForAtLeast60Days"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"PoolStatusMustBeEitherClosedOrCreated"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"PoolStatusMustBeEitherClosedOrActive"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"PoolStatusMustBeAtLeast60DaysPastDeadline"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"CannotBeZeroAddress"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"DeadlineMustNotBeMoreThan1YearInTheFuture"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"MustBePoolOwnerOrAdmin"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"PoolIsNotEmpty"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"PoolOwnerCannotCommitToHisOwnPool"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"PoolSoftCapReached"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"PoolStatusMustBeClosed"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"RewardsHaveNotYetBeenPaidOut"})}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"This contract uses OpenZeppelin's upgradeable contracts to ensure future compatibility and improvements."}),"\n",(0,l.jsx)(n.li,{children:"It has multiple functionalities related to pool management, such as creating pools, committing to pools, and handling pool rewards."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>t});var l=s(6540);const o={},c=l.createContext(o);function i(e){const n=l.useContext(c);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),l.createElement(c.Provider,{value:n},e.children)}}}]);