"use strict";(self.webpackChunkdocus=self.webpackChunkdocus||[]).push([[324],{8453:(n,e,s)=>{s.d(e,{R:()=>a,x:()=>l});var r=s(6540);const d={},c=r.createContext(d);function a(n){const e=r.useContext(c);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(d):n.components||d:a(n.components),r.createElement(c.Provider,{value:e},n.children)}},9055:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>i,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"engage/back-end-api/graphqlApi/graphql-api-staking-v2","title":"Staking V2","description":"Plans","source":"@site/docs/engage/back-end-api/graphqlApi/stakingv2.md","sourceDirName":"engage/back-end-api/graphqlApi","slug":"/engage/back-end-api/graphqlApi/graphql-api-staking-v2","permalink":"/docs/engage/back-end-api/graphqlApi/graphql-api-staking-v2","draft":false,"unlisted":false,"editUrl":"https://github.com/defactor-com/documentation/tree/main/docs/engage/back-end-api/graphqlApi/stakingv2.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"graphql-api-staking-v2","title":"Staking V2","sidebar_position":2},"sidebar":"docSidebar","previous":{"title":"Staking V1","permalink":"/docs/engage/back-end-api/graphqlApi/graphql-api-staking-v1"},"next":{"title":"Vesting","permalink":"/docs/engage/back-end-api/graphqlApi/graphql-api-vesting"}}');var d=s(4848),c=s(8453);const a={id:"graphql-api-staking-v2",title:"Staking V2",sidebar_position:2},l=void 0,i={},o=[{value:"Plans",id:"plans",level:2},{value:"<code>Create Plan</code>",id:"create-plan",level:3},{value:"<code>Update Plan</code>",id:"update-plan",level:3},{value:"<code>Get Plans Dynamic Apr</code>",id:"get-plans-dynamic-apr",level:3},{value:"Positions",id:"positions",level:2},{value:"<code>Get Expected Rewards By User</code>",id:"get-expected-rewards-by-user",level:3},{value:"<code>Get Expected Rewards</code>",id:"get-expected-rewards",level:3},{value:"<code>Get Rewards Received By User</code>",id:"get-rewards-received-by-user",level:3},{value:"<code>Get Total Value Locked</code>",id:"get-total-value-locked",level:3}];function t(n){const e={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,c.R)(),...n.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(e.h2,{id:"plans",children:"Plans"}),"\n",(0,d.jsx)(e.h3,{id:"create-plan",children:(0,d.jsx)(e.code,{children:"Create Plan"})}),"\n",(0,d.jsx)(e.p,{children:"Create a new plan with the indicated APY and lock duration in seconds."}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"HTTP Method"}),": POST"]}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"Roles"}),": Admin"]}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"Endpoint"}),": ",(0,d.jsx)(e.code,{children:"{{BASE_URL}}/v1/graphql"})]}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"GraphQL Body"}),":"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-graphql",children:"mutation ($plan: CreatePlanV2Input!) {\n  v2CreatePlan(plan: $plan) {\n    res\n    success\n  }\n}\n"})}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"Params"}),":"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-json",children:'{\n  "plan": {\n    "network": "{{NETWORK_POLYGON}}",\n    "contractName": "{{STAKING}}",\n    "data": {\n      "stakingToken": "0x1234567890123456789012345678901234567890",\n      "rewardToken": "0x1234567890123456789012345678901234567890",\n      "maxStakedAmount": "1000000000000000000000000",\n      "minStakeAmount": "1000000000000000000",\n      "initialRatio": 10,\n      "stakingEndTime": "2026-01-01",\n      "rewardsEndTime": "2026-02-01",\n      "lockDuration": 7776000,\n      "apr": 5,\n      "aprAfterUnlock": 2\n    }\n  }\n}\n'})}),"\n",(0,d.jsx)(e.p,{children:(0,d.jsx)(e.strong,{children:"Response"})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-json",children:'{\n  "v1CreatePlan": {\n    "res": {\n      "_type": "TransactionResponse",\n      "accessList": [],\n      "blobVersionedHashes": null,\n      "blockHash": null,\n      "blockNumber": null,\n      "chainId": "80001",\n      "from": "0xa8983Fe59b2F08F9F1B3E833c5D47B256F7FE0d5",\n      "gasLimit": "150012",\n      "gasPrice": null,\n      "hash": "0x68dc6f65b96a427c4c289371637b063bbe20d9841d6c8183f06e657ab10efb1e",\n      .\n      .\n      .\n    },\n    "success": true\n  }\n}\n'})}),"\n",(0,d.jsx)(e.h3,{id:"update-plan",children:(0,d.jsx)(e.code,{children:"Update Plan"})}),"\n",(0,d.jsx)(e.p,{children:"Create a new plan with the indicated APY and lock duration in seconds."}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"HTTP Method"}),": POST"]}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"Roles"}),": Admin"]}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"Endpoint"}),": ",(0,d.jsx)(e.code,{children:"{{BASE_URL}}/v1/graphql"})]}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"GraphQL Body"}),":"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-graphql",children:"mutation ($plan: UpdatePlanV2Input!) {\n  v2UpdatePlan(plan: $plan) {\n    res\n    success\n  }\n}\n"})}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"Params"}),":"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-json",children:'{\n  "plan": {\n    "network": "{{NETWORK_POLYGON}}",\n    "contractName": "{{STAKING}}",\n    "data": {\n      "planId": 0,\n      "maxStakedAmount": "1000000000000000000000000",\n      "minStakeAmount": "1000000000000000000",\n      "stakingEndTime": "2026-01-01",\n      "rewardsEndTime": "2026-02-01",\n      "lockDuration": 7776000,\n      "apr": 5,\n      "aprAfterUnlock": 2\n    }\n  }\n}\n'})}),"\n",(0,d.jsx)(e.p,{children:(0,d.jsx)(e.strong,{children:"Response"})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-json",children:'{\n  "v1CreatePlan": {\n    "res": {\n      "_type": "TransactionResponse",\n      "accessList": [],\n      "blobVersionedHashes": null,\n      "blockHash": null,\n      "blockNumber": null,\n      "chainId": "80001",\n      "from": "0xa8983Fe59b2F08F9F1B3E833c5D47B256F7FE0d5",\n      "gasLimit": "150012",\n      "gasPrice": null,\n      "hash": "0x68dc6f65b96a427c4c289371637b063bbe20d9841d6c8183f06e657ab10efb1e",\n      .\n      .\n      .\n    },\n    "success": true\n  }\n}\n'})}),"\n",(0,d.jsx)(e.h3,{id:"get-plans-dynamic-apr",children:(0,d.jsx)(e.code,{children:"Get Plans Dynamic Apr"})}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"HTTP Method"}),": POST"]}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"Roles"}),": Guest"]}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"Endpoint"}),": ",(0,d.jsx)(e.code,{children:"{{BASE_URL}}/v1/graphql"})]}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"GraphQL Body"}),":"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-graphql",children:"query v2GetPlansDynamicApr($plan: GetDynamicAprInput!) {\n  v2GetPlansDynamicApr(plan: $plan) {\n    res\n    success\n  }\n}\n"})}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"Params"}),":"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-json",children:'{\n    "position": {\n        "contractName": "{{STAKING}}",\n        "networks": [{{ETHEREUM}}]\n    }\n}\n'})}),"\n",(0,d.jsx)(e.p,{children:(0,d.jsx)(e.strong,{children:"Response"})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-json",children:'{\n  "v2GetPlansDynamicApr": {\n    "res": [\n      {\n        "apr": 500,\n        "aprAfterUnlock": 200,\n        "data": [\n          {\n            "planId": 0,\n            "schema": "polygon"\n          }\n        ],\n        "dynamicApr": 500,\n        "dynamicAprAfterUnlock": 200,\n        "id": 1,\n        "name": null\n      }\n    ],\n    "success": true\n  }\n}\n'})}),"\n",(0,d.jsx)(e.h2,{id:"positions",children:"Positions"}),"\n",(0,d.jsx)(e.h3,{id:"get-expected-rewards-by-user",children:(0,d.jsx)(e.code,{children:"Get Expected Rewards By User"})}),"\n",(0,d.jsxs)(e.p,{children:["Get the expected rewards by user for each open position. Filter by ",(0,d.jsx)(e.code,{children:"now"}),", ",(0,d.jsx)(e.code,{children:"day"}),", ",(0,d.jsx)(e.code,{children:"week"}),", ",(0,d.jsx)(e.code,{children:"month"}),", ",(0,d.jsx)(e.code,{children:"six-months"}),", ",(0,d.jsx)(e.code,{children:"year"})," or ",(0,d.jsx)(e.code,{children:"all"}),"."]}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"HTTP Method"}),": POST"]}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"Roles"}),": Guest"]}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"Endpoint"}),": ",(0,d.jsx)(e.code,{children:"{{BASE_URL}}/v1/graphql"})]}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"GraphQL Body"}),":"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-graphql",children:"query ($position: RewardsByUserInput!) {\n  v2GetExpectedRewardsByUser(position: $position) {\n    res\n    success\n  }\n}\n"})}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"Params"}),":"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-json",children:'{\n  "position": {\n    "contractName": "{{STAKING}}",\n    "data": {\n      "address": "0xa8983Fe59b2F08F9F1B3E833c5D47B256F7FE0d5",\n      "networks": ["{{NETWORK_ETHEREUM}}", "{{NETWORK_BASE}}"],\n      "filterBy": ["now", "day", "year"],\n      "withAccruedRewards": false\n    }\n  }\n}\n'})}),"\n",(0,d.jsx)(e.p,{children:(0,d.jsx)(e.strong,{children:"Response"})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-json",children:'{\n  "v1GetExpectedRewardsByUser": {\n    "res": {\n      "now": {\n        "FACTR": 11.87201460235921,\n        "USD": 0.46357703076262946\n      },\n      "day": {\n        "FACTR": 14.746729214231358,\n        "USD": 0.5758285490345839\n      }\n    },\n    "success": true\n  }\n}\n'})}),"\n",(0,d.jsx)(e.h3,{id:"get-expected-rewards",children:(0,d.jsx)(e.code,{children:"Get Expected Rewards"})}),"\n",(0,d.jsxs)(e.p,{children:["Get the expected rewards for each open position. Filter by ",(0,d.jsx)(e.code,{children:"now"}),", ",(0,d.jsx)(e.code,{children:"day"}),", ",(0,d.jsx)(e.code,{children:"week"}),", ",(0,d.jsx)(e.code,{children:"month"}),", ",(0,d.jsx)(e.code,{children:"six-months"}),", ",(0,d.jsx)(e.code,{children:"year"})," or ",(0,d.jsx)(e.code,{children:"all"}),"."]}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"HTTP Method"}),": POST"]}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"Roles"}),": Guest"]}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"Endpoint"}),": ",(0,d.jsx)(e.code,{children:"{{BASE_URL}}/v1/graphql"})]}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"GraphQL Body"}),":"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-graphql",children:"query ($position: RewardsFilterInput!) {\n  v2GetExpectedRewards(position: $position) {\n    res\n    success\n  }\n}\n"})}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"Params"}),":"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-json",children:'{\n  "position": {\n    "contractName": "{{STAKING}}",\n    "data": {\n      "networks": ["{{NETWORK_ETHEREUM}}", "{{NETWORK_POLYGON}}"],\n      "filterBy": ["day", "year"],\n      "withAccruedRewards": false\n    }\n  }\n}\n'})}),"\n",(0,d.jsx)(e.p,{children:(0,d.jsx)(e.strong,{children:"Response"})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-json",children:'{\n  "v1GetExpectedRewardsByUser": {\n    "res": {\n      "day": {\n        "FACTR": 11.87201460235921,\n        "USD": 0.46357703076262946\n      },\n      "week": {\n        "FACTR": 14.746729214231358,\n        "USD": 0.5758285490345839\n      }\n    },\n    "success": true\n  }\n}\n'})}),"\n",(0,d.jsx)(e.h3,{id:"get-rewards-received-by-user",children:(0,d.jsx)(e.code,{children:"Get Rewards Received By User"})}),"\n",(0,d.jsxs)(e.p,{children:["Get the rewards claimed by user. Filter by ",(0,d.jsx)(e.code,{children:"now"}),", ",(0,d.jsx)(e.code,{children:"day"}),", ",(0,d.jsx)(e.code,{children:"week"}),", ",(0,d.jsx)(e.code,{children:"month"}),", ",(0,d.jsx)(e.code,{children:"six-months"}),", ",(0,d.jsx)(e.code,{children:"year"})," or ",(0,d.jsx)(e.code,{children:"all"}),"."]}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"HTTP Method"}),": POST"]}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"Roles"}),": Guest"]}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"Endpoint"}),": ",(0,d.jsx)(e.code,{children:"{{BASE_URL}}/v1/graphql"})]}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"GraphQL Body"}),":"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-graphql",children:"query ($position: RewardsByUserInput!) {\n  v2GetRewardsReceivedByUser(position: $position) {\n    res\n    success\n  }\n}\n"})}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"Params"}),":"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-json",children:'{\n  "position": {\n    "contractName": "{{STAKING}}",\n    "data": {\n      "address": "0xa8983Fe59b2F08F9F1B3E833c5D47B256F7FE0d5",\n      "networks": ["{{NETWORK_ETHEREUM}}", "{{NETWORK_POLYGON}}"],\n      "filterBy": ["day", "year"]\n    }\n  }\n}\n'})}),"\n",(0,d.jsx)(e.p,{children:(0,d.jsx)(e.strong,{children:"Response"})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-json",children:'{\n  "v1GetRewardsReceivedByUser": {\n    "res": {\n      "day": {\n        "FACTR": 11.87201460235921,\n        "USD": 0.46357703076262946\n      },\n      "year": {\n        "FACTR": 14.746729214231358,\n        "USD": 0.5758285490345839\n      }\n    },\n    "success": true\n  }\n}\n'})}),"\n",(0,d.jsx)(e.h3,{id:"get-total-value-locked",children:(0,d.jsx)(e.code,{children:"Get Total Value Locked"})}),"\n",(0,d.jsx)(e.p,{children:"Get the expected rewards by user for each open position. Address is optional."}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"HTTP Method"}),": POST"]}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"Roles"}),": Guest"]}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"Endpoint"}),": ",(0,d.jsx)(e.code,{children:"{{BASE_URL}}/v1/graphql"})]}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"GraphQL Body"}),":"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-graphql",children:"query v2GetTotalValueLocked($position: GetTotalValueLockedInput!) {\n  v2GetTotalValueLocked(position: $position) {\n    res\n    success\n  }\n}\n"})}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"Params"}),":"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-json",children:'{\n  "position": {\n    "contractName": "{{STAKING}}",\n    "data": {\n      "networks": ["ethereum"],\n      "address": "0xa8983Fe59b2F08F9F1B3E833c5D47B256F7FE0d5"\n    }\n  }\n}\n'})}),"\n",(0,d.jsx)(e.p,{children:(0,d.jsx)(e.strong,{children:"Response"})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-json",children:'{\n  "v2GetTotalValueLocked": {\n       "res": {\n        "byAddress": {\n          "FACTR": 1500,\n          "USD": 25.500000000000004\n        },\n        "byNetworks": {\n          "FACTR": 2500,\n          "LBM": 2000,\n          "USD": 68.5\n        }\n      }\n    "success": true\n  }\n}\n'})})]})}function h(n={}){const{wrapper:e}={...(0,c.R)(),...n.components};return e?(0,d.jsx)(e,{...n,children:(0,d.jsx)(t,{...n})}):t(n)}}}]);