"use strict";(self.webpackChunkdocus=self.webpackChunkdocus||[]).push([[4558],{1618:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>r,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>d});var l=n(4848),o=n(8453);const c={id:"smart-contract-erc20-collateral-pool-technical-aspects",title:"Technical Aspects",sidebar_position:2,tags:["Technical Aspects"]},t=void 0,i={id:"pools/smart-contracts/pools-contract/smart-contract-erc20-collateral-pool-technical-aspects",title:"Technical Aspects",description:"Dependencies",source:"@site/docs/pools/smart-contracts/pools-contract/technical_aspects.md",sourceDirName:"pools/smart-contracts/pools-contract",slug:"/pools/smart-contracts/pools-contract/smart-contract-erc20-collateral-pool-technical-aspects",permalink:"/docs/pools/smart-contracts/pools-contract/smart-contract-erc20-collateral-pool-technical-aspects",draft:!1,unlisted:!1,editUrl:"https://github.com/defactor-com/documentation/tree/main/docs/pools/smart-contracts/pools-contract/technical_aspects.md",tags:[{label:"Technical Aspects",permalink:"/docs/tags/technical-aspects"}],version:"current",sidebarPosition:2,frontMatter:{id:"smart-contract-erc20-collateral-pool-technical-aspects",title:"Technical Aspects",sidebar_position:2,tags:["Technical Aspects"]},sidebar:"docSidebar",previous:{title:"Introduction",permalink:"/docs/pools/smart-contracts/pools-contract/smart-contract-erc20-collateral-pool"},next:{title:"Example",permalink:"/docs/pools/smart-contracts/pools-contract/smart-contract-erc20-collateral-pool-example"}},r={},d=[{value:"Dependencies",id:"dependencies",level:2},{value:"Contract: Pools",id:"contract-pools",level:2},{value:"Constants",id:"constants",level:3},{value:"Functions",id:"functions",level:3},{value:"Events",id:"events",level:3},{value:"Custom Errors",id:"custom-errors",level:3},{value:"Notes",id:"notes",level:2}];function a(e){const s={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"OpenZeppelin Contracts (Upgradeable)"}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"Pools.storage.sol"})," for storage-related operations"]}),"\n"]}),"\n",(0,l.jsx)(s.h2,{id:"contract-pools",children:"Contract: Pools"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsx)(s.p,{children:"Inherits:"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"PoolsStorage"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"AccessControlUpgradeable"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"PausableUpgradeable"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"IERC721ReceiverUpgradeable"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"IERC1155ReceiverUpgradeable"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:["Uses ",(0,l.jsx)(s.code,{children:"SafeERC20Upgradeable"})," for ERC20 token operations."]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"constants",children:"Constants"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"POOL_FEE"}),": Fixed fee for pool creation."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"LOAN_TAKEN_FEE_PERCENTAGE"}),": Fee percentage for taken loans."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"MIN_POOL_CLOSED_TIME"}),": Minimum time before a pool can be closed."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"COLLECT_POOL_MAX_TIME"}),": Maximum time for collecting funds from a pool."]}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"functions",children:"Functions"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"__Pools_init"}),": Initializes the contract with USDC token."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"getPool"}),": Retrieves a pool by index."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"createPool"}),": Create a new funding pool, pool status default is CREATED."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"commitToPool"}),": Commits funds to a pool, only available for pools with CREATED status."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"collectPool"}),": Collects funds from a pool that has reached its goal, changes pool status to ACTIVE."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"depositRewards"}),": Deposits rewards into an active pool."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"closePool"}),": Closes an active pool."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"archivePool"}),": Archives a pool."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"uncommitFromPool"}),": Un-commit funds from a pool."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"claim"}),": Claims rewards from a pool."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"withdrawFeesCollected"}),": Withdraws collected fees by the admin."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"adminWithdrawAll"}),": Allows admin to withdraw all funds when paused."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"pause"}),": Pauses the contract."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"unpause"}),": Unpauses the contract."]}),"\n",(0,l.jsx)(s.li,{children:"Private helper functions for token transfers."}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"events",children:"Events"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"PoolCreated"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"CommittedToPool"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"UncommittedFromPool"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"PoolCollected"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"RewardsDeposited"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"PoolClosed"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"RewardsClaimed"})}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"custom-errors",children:"Custom Errors"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"PoolDoesNotExists"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"SoftCapMustBeLessThanHardCap"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"DeadlineMustBeInFuture"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"PoolStatusMustBeCreated"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"PoolStatusMustBeActive"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"MustDepositAtleastCommittedAmount"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"PoolDeadlineReached"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"PoolDeadlineNotReached"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"PoolHardCapReached"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"MustBePoolOwner"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"PoolSoftCapNotReached"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"CannotCollect30DaysAfterDeadline"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"PoolStatusMustBeClosedForAtLeast60Days"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"PoolStatusMustBeEitherClosedOrCreated"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"PoolStatusMustBeEitherClosedOrActive"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"PoolStatusMustBeAtLeast60DaysPastDeadline"})}),"\n"]}),"\n",(0,l.jsx)(s.h2,{id:"notes",children:"Notes"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"This contract uses OpenZeppelin's upgradeable contracts to ensure future compatibility and improvements."}),"\n",(0,l.jsx)(s.li,{children:"It has multiple functionalities related to pool management, such as creating pools, committing to pools, and handling pool rewards."}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>i});var l=n(6540);const o={},c=l.createContext(o);function t(e){const s=l.useContext(c);return l.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),l.createElement(c.Provider,{value:s},e.children)}}}]);