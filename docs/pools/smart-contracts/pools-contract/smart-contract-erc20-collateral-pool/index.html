<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-pools/smart-contracts/pools-contract/smart-contract-erc20-collateral-pool" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.3.2">
<title data-rh="true">Introduction | Defactor Developer Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://defactor.dev/img/social-media-preview.png"><meta data-rh="true" name="twitter:image" content="https://defactor.dev/img/social-media-preview.png"><meta data-rh="true" property="og:url" content="https://defactor.dev/docs/pools/smart-contracts/pools-contract/smart-contract-erc20-collateral-pool"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Introduction | Defactor Developer Docs"><meta data-rh="true" name="description" content="Pools.sol this contract allows users to create, manage, and interact with funding pools using ERC20, ERC721, and ERC1155 tokens."><meta data-rh="true" property="og:description" content="Pools.sol this contract allows users to create, manage, and interact with funding pools using ERC20, ERC721, and ERC1155 tokens."><link data-rh="true" rel="icon" href="/img/Defactor_Favicon-32x32.png"><link data-rh="true" rel="canonical" href="https://defactor.dev/docs/pools/smart-contracts/pools-contract/smart-contract-erc20-collateral-pool"><link data-rh="true" rel="alternate" href="https://defactor.dev/docs/pools/smart-contracts/pools-contract/smart-contract-erc20-collateral-pool" hreflang="en"><link data-rh="true" rel="alternate" href="https://defactor.dev/docs/pools/smart-contracts/pools-contract/smart-contract-erc20-collateral-pool" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://2WY12FOPQF-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Defactor Developer Docs" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.0daa2176.css">
<script src="/assets/js/runtime~main.f258366d.js" defer="defer"></script>
<script src="/assets/js/main.c7cf1530.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/Defactor-Logo-Dark.svg" alt="Defactor logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/Defactor-Logo-Light.svg" alt="Defactor logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/docs/introduction/">Introduction</a><a class="navbar__item navbar__link" href="/docs/category/assets">Assets</a><a class="navbar__item navbar__link" href="/docs/category/pools">Pools</a><a class="navbar__item navbar__link" href="/docs/category/engage">Engage</a><a class="navbar__item navbar__link" href="/docs/category/real-world-use-cases">RW Use Cases</a><a class="navbar__item navbar__link" href="/docs/category/resources">Resources</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/defactor-com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_eExm"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/introduction/">Introduction</a><button aria-label="Expand sidebar category &#x27;Introduction&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/assets">Assets</a><button aria-label="Expand sidebar category &#x27;Assets&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/pools">Pools</a><button aria-label="Collapse sidebar category &#x27;Pools&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/category/smart-contracts">Smart Contracts</a><button aria-label="Collapse sidebar category &#x27;Smart Contracts&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/category/counterparty-pool-contract">Counterparty Pool Contract</a><button aria-label="Collapse sidebar category &#x27;Counterparty Pool Contract&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/pools/smart-contracts/pools-contract/smart-contract-erc20-collateral-pool">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pools/smart-contracts/pools-contract/smart-contract-erc20-collateral-pool-technical-aspects">Technical Aspects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pools/smart-contracts/pools-contract/smart-contract-erc20-collateral-pool-example">Example</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/collateral-pool-contract">Collateral Pool Contract</a><button aria-label="Expand sidebar category &#x27;Collateral Pool Contract&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/staking-contract">Staking Contract</a><button aria-label="Expand sidebar category &#x27;Staking Contract&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/back-end-services">Back End Services</a><button aria-label="Expand sidebar category &#x27;Back End Services&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/pools/front-end-ui/">Front End UI</a><button aria-label="Expand sidebar category &#x27;Front End UI&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/pools-how-tos">Pools How-Tos</a><button aria-label="Expand sidebar category &#x27;Pools How-Tos&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/engage">Engage</a><button aria-label="Expand sidebar category &#x27;Engage&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/real-world-use-cases">Real World Use Cases</a><button aria-label="Expand sidebar category &#x27;Real World Use Cases&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/resources">Resources</a><button aria-label="Expand sidebar category &#x27;Resources&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/pools"><span itemprop="name">Pools</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/smart-contracts"><span itemprop="name">Smart Contracts</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/counterparty-pool-contract"><span itemprop="name">Counterparty Pool Contract</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Introduction</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Introduction</h1></header><p><code>Pools.sol</code> this contract allows users to create, manage, and interact with funding pools using <code>ERC20</code>, <code>ERC721</code>, and <code>ERC1155</code> tokens.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pool">Pool<a href="#pool" class="hash-link" aria-label="Direct link to Pool" title="Direct link to Pool">​</a></h2>
<p>The pool is a structure that keeps track of total committed, total rewarded, who the borrower is (pool creator), and other information that are essential for the proper functioning of the contract.</p>
<p>The pool has some important characteristics:</p>
<ul>
<li>Every pool has a soft cap, hard cap, a deadline, and a minimum APR. The soft cap will be the minimum amount of funds that the pool must reach to be considered <code>ACTIVE</code>. The hard cap will be the maximum amount of funds that the pool can reach, the deadline is the maximum time that the pool can be open to receive funds and be rewarded by the borrower, and, finally the minimum APR is the interest applied to the total committed that the deposited rewards must exceed to close the pool. If the pool owner (the borrower) tries to collect the pool before reaching the soft cap, the contract will return an error reverting the transaction but it will also no only restrict the pool owner of collecting the funds but also the lender if they try to un-commit from the pool before it reaches the soft cap. On the other hand, the hard cap will be used to revert transactions if a lender tries to commit to a pool and it overpasses the hard cap and also the deadline will be used to revert transactions if someone tries to collect, archive, commit, un-commit at a wrong time.</li>
<li>This pool has the advantage of receiving 3 types of tokens as collateral that follows the <code>ERC20</code>, <code>ERC721</code> and <code>ERC1155</code> standards. The pool owner can provide as much collateral as they want at the same time to the same pool.</li>
<li>When a pool is created its default status is <code>CREATED</code>, and then when it reaches the soft cap and the owner collects it, the pool status will be changed to <code>ACTIVE</code>, later when the owner decides to close it, the pool status will be updated to <code>CLOSED</code> and finally, when the pool is archived, the pool status will be <code>ARCHIVED</code>. All of these status changes are made by trigger events.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="roles">Roles<a href="#roles" class="hash-link" aria-label="Direct link to Roles" title="Direct link to Roles">​</a></h2>
<p>The smart contract caters to three types of users: the infrastructure provider which is the admin of the contract, the pool owner that can be interpreted as the borrower and the lender that is the account that lends the money to the pool.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="admin">admin<a href="#admin" class="hash-link" aria-label="Direct link to admin" title="Direct link to admin">​</a></h3>
<p>When a new instance of this contract is deployed, the sender will be by default the admin of the contract and will have the responsibility to collect the fees that the contract collects, withdraw all USDC funds the contract has and pause and unpause the contract for security reasons.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="pool-owner-borrower">pool owner (borrower)<a href="#pool-owner-borrower" class="hash-link" aria-label="Direct link to pool owner (borrower)" title="Direct link to pool owner (borrower)">​</a></h3>
<p>The pool owner is in charge of managing its own pool. It can create a new pool, collect the funds from the pool, close the pool and archive the pool. It can also deposit rewards to the pool.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-pool">create a pool<a href="#create-a-pool" class="hash-link" aria-label="Direct link to create a pool" title="Direct link to create a pool">​</a></h4>
<p>Every user can create a pool and will be considered as the pool owner. A charge of $200 is required to cover the fees for the infrastructure maintenance. Also, the deadline cannot be more than one year in the future.</p>
<p><img decoding="async" loading="lazy" alt="Pools Create Pool" src="/assets/images/Pools_createpool-55f92006ba0a35768b47d1fd0f0348be.png" width="2358" height="4892" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="collect-a-pool">collect a pool<a href="#collect-a-pool" class="hash-link" aria-label="Direct link to collect a pool" title="Direct link to collect a pool">​</a></h4>
<p>This action allows the pool owner to collect the funds from the pool. A pool can only be collected once when the pool status is still <code>CREATED</code> and both the soft cap and the deadline were reached. The contract will charge a 2% fee of the total committed. If the pool owner tries to collect the funds before reaching the soft cap or collecting it twice, the transaction will be reverted.</p>
<p><img decoding="async" loading="lazy" alt="Pools Collect Pool" src="/assets/images/Pools_collectpool-655c142afb224b423ae4572a55a8f00d.png" width="2506" height="6858" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="deposit-rewards">deposit rewards<a href="#deposit-rewards" class="hash-link" aria-label="Direct link to deposit rewards" title="Direct link to deposit rewards">​</a></h4>
<p>When the collection phase is over, the borrower (pool owner) will have to pay the taken loan by depositing the rewards to the pool when the pool status is still <code>ACTIVE</code>.</p>
<p><img decoding="async" loading="lazy" alt="Pools Deposit Rewards" src="/assets/images/Pools_depositrewards-8349edbf2e56f64aa710f82394eb24fc.png" width="2208" height="3974" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="close-a-pool">close a pool<a href="#close-a-pool" class="hash-link" aria-label="Direct link to close a pool" title="Direct link to close a pool">​</a></h4>
<p>A pool owner can close the pool anytime if one of the following conditions are meet:</p>
<ul>
<li>Pool is <code>CREATED</code> and the max collect time of 30 days after deadline has passed</li>
<li>Pool is <code>CREATED</code> the deadline was reached and the soft cap was not reached</li>
<li>Pool is <code>ACTIVE</code> and the total rewards are equal to or greater than the total committed in the pool plus the configured interest, adjusted by <code>INTEREST_DECIMAL_PLACES = 100_000_000</code>. To calculate this, refer to the following formula:</li>
</ul>
<div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pool.totalCommitted + (pool.totalCommitted * pool.minimumAPR) / INTEREST_DECIMAL_PLACES</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="Pools Close Pool" src="/assets/images/Pools_closepool-64e6ad8f9aadfa525c1cc11dee461713.png" width="2830" height="5536" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="archive-a-pool">archive a pool<a href="#archive-a-pool" class="hash-link" aria-label="Direct link to archive a pool" title="Direct link to archive a pool">​</a></h4>
<p>A pool can be archived by two roles, the pool owner and the contract admin but for both roles all rewards must have been claimed and the pool needs to be <code>CLOSED</code> or <code>CREATED</code>. If the pool status is <code>CLOSED</code>, then a minimum of <code>pool close time + 60 days</code> needs to be passed to archive the pool. If the pool status is <code>CREATED</code>, then the total committed must be zero and a minimum of <code>pool deadline + 60 days</code> needs to be passed to archive the pool, otherwise the transaction will be reverted.</p>
<p><img decoding="async" loading="lazy" alt="Pools Archive Pool" src="/assets/images/Pools_archivepool-8dd31873d984ae16a79cda027e8d7151.png" width="2452" height="6624" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="claim-the-rewards-for-users">claim the rewards for users<a href="#claim-the-rewards-for-users" class="hash-link" aria-label="Direct link to claim the rewards for users" title="Direct link to claim the rewards for users">​</a></h4>
<p>This function can be performed by two roles, the pool owner and the contract admin. It allows claims rewards for users only available when the pool status is  <code>CLOSED</code> and more than 60 days has passed after pool closing.</p>
<p><img decoding="async" loading="lazy" alt="Pools Claim rewards for users" src="/assets/images/Pools_claimforusers-457416056b1cc892c16df20d8944c6e0.png" width="2358" height="4544" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="un-commit-from-a-pool-for-users">un-commit from a pool for users<a href="#un-commit-from-a-pool-for-users" class="hash-link" aria-label="Direct link to un-commit from a pool for users" title="Direct link to un-commit from a pool for users">​</a></h4>
<p>This function can be performed by two roles, the pool owner and the contract admin. It allows un-commit for users only available when the pool status is  <code>CREATED</code> and more than 60 days has passed after pool deadline.</p>
<p><img decoding="async" loading="lazy" alt="Pools Un-commit Pool for users" src="/assets/images/Pools_uncommitforusers-ca374e43c0a7fbffe4db8c566d30c057.png" width="2358" height="4544" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lender-investor">lender (investor)<a href="#lender-investor" class="hash-link" aria-label="Direct link to lender (investor)" title="Direct link to lender (investor)">​</a></h3>
<p>The lender is in charge of lending money to the pools. It can commit to a pool, un-commit from a pool and claim rewards from a pool.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="commit-to-a-pool">commit to a pool<a href="#commit-to-a-pool" class="hash-link" aria-label="Direct link to commit to a pool" title="Direct link to commit to a pool">​</a></h4>
<p>This action allows the lender to invest in a pool and is only available when the pool status is <code>CREATED</code> and both the hard cap and the deadline were not reached. If the lender tries to commit to a pool that has reached the hard cap or the pool status is not <code>CREATED</code>, the transaction will be reverted.</p>
<p><img decoding="async" loading="lazy" alt="Pools Commit To Pool" src="/assets/images/Pools_committopool-7404178a753b0c22e78ba06496155137.png" width="2432" height="4990" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="un-commit-from-a-pool">un-commit from a pool<a href="#un-commit-from-a-pool" class="hash-link" aria-label="Direct link to un-commit from a pool" title="Direct link to un-commit from a pool">​</a></h4>
<p>It allows the lender (investor) to un-commit from a pool and is only available when the pool status is <code>CREATED</code>. The lender can un-commit from a pool if the max collect time of 30 days after the deadline has passed or when either soft cap or deadline were not reached. Otherwise, the transaction will be reverted.</p>
<p><img decoding="async" loading="lazy" alt="Pools Un-Commit From Pool" src="/assets/images/Pools_uncommitfrompool-129632d650aa5eed086519a9990b125a.png" width="2762" height="4712" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="claim-rewards">claim rewards<a href="#claim-rewards" class="hash-link" aria-label="Direct link to claim rewards" title="Direct link to claim rewards">​</a></h4>
<p>Once the owner has collected the funds from the pool, the lender will be able to claim the rewards. This action can only be called when the pool status is <code>CLOSED</code> or <code>ACTIVE</code>. To calculate the rewards, refer to the following formula:</p>
<div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">((pool.totalRewards * poolCommit.amount) / pool.totalCommitted) - poolCommit.claimedAmount</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In simple words it means, the rewards is equal to the percentage of the amount lent times the total rewards minus the amount already claimed.</p>
<p><img decoding="async" loading="lazy" alt="Pools Claim" src="/assets/images/Pools_claim-23f4ce9f7f95887b0a375721143b9710.png" width="2484" height="3912" class="img_ev3q"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/erc-20">ERC20</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/collateral-pool">Collateral Pool</a></li></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/defactor-com/documentation/tree/main/docs/pools/smart-contracts/pools-contract/introduction.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/category/counterparty-pool-contract"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Counterparty Pool Contract</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/pools/smart-contracts/pools-contract/smart-contract-erc20-collateral-pool-technical-aspects"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Technical Aspects</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#pool" class="table-of-contents__link toc-highlight">Pool</a></li><li><a href="#roles" class="table-of-contents__link toc-highlight">Roles</a><ul><li><a href="#admin" class="table-of-contents__link toc-highlight">admin</a></li><li><a href="#pool-owner-borrower" class="table-of-contents__link toc-highlight">pool owner (borrower)</a></li><li><a href="#lender-investor" class="table-of-contents__link toc-highlight">lender (investor)</a></li></ul></li></ul></div></div></div></div></main></div></div></div><div class="footerContainer_KhnZ"><div class="footerBody_dbZm"><div class="footerHeader_Db9Z"><div><a href="https://www.defactor.com/"><img width="200" alt="Defactor Logo" src="https://assets-global.website-files.com/64555cbab4849c7309c3ff36/645a4c1a6a368f6b46de2e40_Defactor%20Logo%20-%20Light.svg"></a></div><div class="footerLinksContainer_ebfi"><div><h4>Documentation</h4><a class="linkStyles_Q8eD" href="/docs/introduction/tech-stack">Defactor Tech Stack</a><div class="docsStyles_DC7w"><a class="linkStyles_Q8eD" href="/docs/introduction/blockchain-and-web3/">Blockchain and Web3</a><a class="linkStyles_Q8eD" href="/docs/introduction/defactor-toolkit">Software Development Kit</a><a class="linkStyles_Q8eD" href="/docs/introduction/react-components">Front End UI Kit</a></div></div><div><h4>More</h4><a target="_blank" class="linkStyles_Q8eD" href="https://github.com/defactor-com">Defactor GitHub</a><br><a class="linkStyles_Q8eD" href="/docs/introduction/open-source-guidelines">Open Source Guidelines</a><br><a class="linkStyles_Q8eD" href="/docs/resources/roadmap">Technology Roadmap</a></div><div></div></div></div><div class="footerBottom_sgg5"><p>Follow us:</p><div class="footerBottomContent_oe9H"><div class="socialMediaContainer_x35b"><a href="https://t.me/defactor_official" target="_blank"><img width="24" class="socialMediaStyle_qqnu" src="https://assets-global.website-files.com/64555cbab4849c7309c3ff36/645a5939e751f051a5f5b725_Telegram%20Icon.svg"></a><a href="https://twitter.com/defactor_" target="_blank"><img width="24" class="socialMediaStyle_qqnu" src="https://assets-global.website-files.com/64555cbab4849c7309c3ff36/654a799ede3ae4c77f819d4d_x-twitter%20light.svg"></a><a href="https://www.linkedin.com/company/defactordao/" target="_blank"><img width="24" class="socialMediaStyle_qqnu" src="https://assets-global.website-files.com/64555cbab4849c7309c3ff36/645a59667c961c4ba540c0ea_LinkedIn%20Icon.svg"></a><a href="https://www.youtube.com/@defactor_" target="_blank"><img width="24" class="socialMediaStyle_qqnu" src="https://assets-global.website-files.com/64555cbab4849c7309c3ff36/64d4e3b34cc6594553e35972_Youtube%20(1).svg"></a><a href="https://discord.com/invite/S2SCMTPMUt" target="_blank"><img width="24" src="https://assets-global.website-files.com/64555cbab4849c7309c3ff36/64d4e38c0da218e95c85dea8_discord.svg"></a></div><p>Copyright © 2024 Defactor. All Rights Reserved</p></div></div></div></div></div>
</body>
</html>